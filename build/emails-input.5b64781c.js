parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Nd5W":[function(require,module,exports) {
"use strict";function e(){return Math.random().toString(36).substring(2,6)+"@"+["gmail.com","miro.com","mail.ru","ya.ru","icloud.com"][Math.floor(5*Math.random())]}function t(t,i){this._getInputArea=function(){return t||(console.error("inputContainerNode is not a node"),!1)},this._BLOCKNAME="EmailsInput",this._ADD_MORE_PEOPLE_TEXT="add more people...",i&&i.textAddMore&&(this._ADD_MORE_PEOPLE_TEXT=i.textAddMore),this._emailsList=["test@gmail.com",e(),e(),e()],this._onChange=function(){},this.onChange=function(e){this._onChange=e},this._buildInputArea()}t.prototype._validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},t.prototype._addMoreEmailsAppend=function(){var e=this,t=this._getInputArea(),i=document.createElement("span");i.className=this._BLOCKNAME+"__AddMoreEmails",i.innerHTML=this._ADD_MORE_PEOPLE_TEXT,i.onclick=function(){e.showUserInput()},t.appendChild(i),t.scrollTop=t.scrollHeight-t.clientHeight},t.prototype._addMoreEmailsRemove=function(){var e=this._getInputArea().querySelector("."+this._BLOCKNAME+"__AddMoreEmails");e&&(e.onclick=null,e.parentElement.removeChild(e))},t.prototype._buildInputArea=function(){var e=this;this._getInputArea().innerHTML="",this._emailsList.forEach(function(t){e._renderNewEmail(t)}),this._addMoreEmailsAppend()},t.prototype._renderNewEmail=function(e){var t=this,i=this._getInputArea(),n=document.createElement("span");n.className=this._BLOCKNAME+"__Item",this._validateEmail(e)||(n.className=n.className+" EmailsInput__Item-invalid");var a=document.createElement("span");a.className=this._BLOCKNAME+"__ItemText",a.innerText=e;var s=document.createElement("span");s.className=this._BLOCKNAME+"__ItemClose",s.onclick=function(){t._removeItemByEmail(e)},n.appendChild(a),n.appendChild(s),i.appendChild(n)},t.prototype._removeItemByEmail=function(e){var t=this._emailsList.indexOf(e);this._removeItemByIndex(t)},t.prototype._removeItemByIndex=function(e){var t=this._emailsList[e];this._emailsList.splice(e,1);var i=this._getInputArea(),n=i.querySelectorAll("."+this._BLOCKNAME+"__Item")[e];i.removeChild(n),this._onChange({action:"delete",items:t,newItems:this._emailsList})},t.prototype._onUserInputBlur=function(e){var t=e.target;""!==t.value?this.addOneEmail(t.value):this._addMoreEmailsAppend(),this._userInputRemove()},t.prototype._userInputRemove=function(){var e=this._getInputArea().querySelector("."+this._BLOCKNAME+"__UserInput");e&&e.parentElement.removeChild(e)},t.prototype.addEmails=function(e){this._addMoreEmailsRemove();for(var t=0;t<e.length;t++)this._renderNewEmail(e[t]),this._emailsList.push(e[t]);this._onChange({action:"add",items:e,newItems:this._emailsList}),this._addMoreEmailsAppend()},t.prototype.addOneEmail=function(e){this._addMoreEmailsRemove(),this._renderNewEmail(e),this._emailsList.push(e),this._onChange({action:"add",items:e,newItems:this._emailsList}),this._addMoreEmailsAppend()},t.prototype.addRandomEmail=function(){this.addOneEmail(e())},t.prototype.getEmails=function(){var e=[];return this._emailsList.forEach(function(t){e.push(t)}),e},t.prototype.setEmails=function(e){this._emailsList=e,this._buildInputArea()},t.prototype.showEmailsCount=function(){for(var e=0,t=0;t<this._emailsList.length;t++)this._validateEmail(this._emailsList[t])&&(e+=1);alert(e)},t.prototype.showUserInput=function(){var e=this;this._addMoreEmailsRemove();var t=this._getInputArea(),i=document.createElement("input");i.className=this._BLOCKNAME+"__UserInput",t.appendChild(i),i.onblur=this._onUserInputBlur.bind(this),i.onkeyup=function(t){if(188===t.keyCode&&""!==i.value.replace(",","")&&(i.value=i.value.replace(",",""),""!==i.value&&e.addOneEmail(i.value),i.onblur=function(){},e._userInputRemove(),e.showUserInput()),13===t.keyCode&&""!==i.value&&(e.addOneEmail(i.value),i.onblur=function(){},e._userInputRemove()),8===t.keyCode&&""===i.value){var n=e._getInputArea(),a=n.querySelectorAll("."+e._BLOCKNAME+"__Item");a.length&&(n.removeChild(a[a.length-1]),e._emailsList.pop())}},i.onpaste=function(t){setTimeout(function(){if(""!==i.value){if(""!==i.value){var t=i.value.split(",");e.addEmails(t)}i.onblur=function(){},e._userInputRemove()}})},i.focus()};
},{}]},{},["Nd5W"], null)
//# sourceMappingURL=/emails-input.5b64781c.js.map